
<%= wicked_pdf_stylesheet_link_tag "pdf" , media: 'all' %>
<%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>




<style type="text/css">
@media print
{
    #pdf_link * { display:none ; }
    .wraper * { visibility: visible; }
    .footer1 * { display:none ; }
    .container * { display:none ; }
    .container-fluid * { display:none ; }
    .mini-title-head-bar * { display:none ; }
    .rgt-side{
        width:45%;
    }
    .course {
        background-color: #ccc!important;
    }
    .lite_section{
        background-color: #eaeaea!important;
    }
    .cumulative{
        background-color: #ccc!important;
    }
    .total_cr{
        background-color: #eaeaea!important;
    }
    .summary{
        background-color: #eaeaea!important;
    }
    .authoeize{
        background-color:#eaeaea!important;
    }
    .authoeize input{
        background-color: #fff!important;
    }
}
</style>

<div class="mini-title-head-bar logiq1">
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <ol class="greybeadcrub">
          <ul class="greybeadcrub">
            <li><%= link_to 'Home',root_path %></li>
            <li class="active">View Pdf</li>
          </ul>                    
        </ol>
      </div>
    </div>
  </div>
</div>
<%
if current_user.subscription.plan_id.blank?
    style = 'background-image: url("/assets/trial.jpg");'
else
    style = ''
end
%>
<div class="wraper" style= '<%= style %>'>
    <div>
        <div class="lft-side">
            <h4>HIGH SCHOOL TRANSCRIPT</h4>
            (Grades Freshman-Senior)<br/><br/>
            Graduation Date: <%=@student.graduation_date%>

        </div>
        <div class="rgt-side">

            <div class="school_logo">
                <% if params[:format]=="pdf" %>
                <%= wicked_pdf_image_tag '/img/logo_school.jpg' %>
                <%else%>
                <img src="/img/logo_school.jpg">
                <%end%>                                
            </div>
        </div>

        <div class="add_section">
            <div class="f-side">
                <div>
                    <span class="st-info">School of Record</span><br />
                    <%=@school.school_name%><br>
                    School Administrator: <%=@school.admin_name%><br>
                    <%=@school.address1%> <%=@school.address2%> <%=@school.address3%><br>
                    <%@school_country = Carmen::Country.coded(@school.country)%>
                    <% @subregions = @school_country.subregions %>
                    <% @school_state = @subregions.coded(@school.state) %>
                    <%if @school_state.blank?%>
                    <%= @school.state%>,             
                    <%else%>
                    <%=@school_state.name%>,
                    <%end%><%=@school_country%>, <%=@student.zip%><br>
                    <%if !@school.phone.blank?%>
                        <%=@school.phone%><br>
                    <%end%>
                    <%if !@school.email.blank?%>
                        <%=@school.email%><br>
                    <%end%>

                </div>
            </div>

            <div class="s-side">
                <div>
                    <span class="st-info">Student Information</span><br />
                    <%=@student.first_name%> <%=@student.middle_name%> <%=@student.last_name%><br>
                    
                    Date of Birth: <%=@student.dob%><br>
                    <%if !@student.address1.blank?%>
                
                        <%=@student.address1+' '+@student.address2+' '+@student.address3 %><br>
                    <%end%>
                    <%@country = Carmen::Country.coded(@student.country)%>
                    <% @subregions = @country.subregions %>
                    <% @state = @subregions.coded(@student.state) %>
                    <%if @state.blank?%>
                    <%= @student.state%>,
                    <%else%>
                    <%=@state.name%>,
                    <%end%>
                    <%=@country%>, <%=@student.zip%><br>
                    <%if !@student.phone.blank?%>
                        <%=@student.phone%><br>
                    <%end%>
                    <%if !@student.email.blank?%>
                        <%=@student.email%><br>
                    <%end%>

                </div>

            </div>
        </div>
        <div class="clear"></div>
        <div class="clearmargin"></div>
            <%
                    @frsh=Hash.new
                    @soph=Hash.new 
                    @jun=Hash.new
                    @sen=Hash.new
                    @val=Hash.new
                    @val={"A+"=>4.3,"A"=>4.0,"A-"=>3.7,"B+"=>3.3,"B"=>3.0,"B-"=>2.7,"C+"=>2.3,"C"=>2.0,"C-"=>1.7,"D+"=>1.3,"D"=>1.0,"D-"=>0.7,"F"=>0,"CR"=>0,"NC"=>0,"W"=>0,"I"=>0}
            %>
            <%
            @student.completion_year.length.times do|academic|
                   
                    
                    if @student.completion_year[academic]=="Freshman"
                        @frsh[academic]={"subject"=> @student.subject[academic],"honor"=>@student.honors[academic],"grade"=>@student.grade[academic],"credit"=>@student.credits[academic],"course"=>@student.course_name[academic]}
                    
                    elsif @student.completion_year[academic]=="Sophomore"
                        @soph[academic]={"subject"=> @student.subject[academic],"honor"=>@student.honors[academic],"grade"=>@student.grade[academic],"credit"=>@student.credits[academic],"course"=>@student.course_name[academic]}
                    
                    elsif @student.completion_year[academic]=="Junior"
                        @jun[academic]={"subject"=> @student.subject[academic],"honor"=>@student.honors[academic],"grade"=>@student.grade[academic],"credit"=>@student.credits[academic],"course"=>@student.course_name[academic]}
                    
                    else @student.completion_year[academic]=="Senior"
                        @sen[academic]={"subject"=> @student.subject[academic],"honor"=>@student.honors[academic],"grade"=>@student.grade[academic],"credit"=>@student.credits[academic],"course"=>@student.course_name[academic]}
                    end
                
            end
            %>
   
        <div class="qpd-outer">
            <div class="qpd-outer2">
                <%if @frsh.count > 0%>
            <div class="tab-one">   
                <div class="course">
                    <div class="cour">&nbsp;Course Study - Freshman</div>
                    <div class="honors">Weighted </div>
                    <div class="grade bd-gray">Grade </div>
                    <div class="credite cr-left">Credits</div>
                </div>
                <% @gpa = 0
                @ftcredit = 0 %>
                <% @frsh.each do |k,val| %>
                 <div class="lite_section">
                    <div class="cour">&nbsp;<%= val["subject"] %>: <%= val["course"] %></div>
                        <div class="honors bd-gray"><%= val["honor"]%></div>
                        <div class="grade bd-gray"><%= val["grade"]%></div>
                        <div class="credite cr-left"><%= val["credit"]%></div>
                        <%
                        if val["honor"]=='AP'
                          ap=1 
                        elsif val["honor"]=='Honors'
                          ap=0.5
                        else
                          ap=0
                        end
                        @gpa = @gpa + @val[val["grade"]] +ap
                          if !['F', 'NC', 'CR', 'W', 'I'].include?  val["grade"]
                            @ftcredit = @ftcredit + val["credit"].to_f
                          else
                            @ftcredit = val["credit"].to_f
                          end
                          @fgpacredit = @gpa/@ftcredit

                       %>
                </div>

                <%end%>
                <div class="lite_section">
                <%@fgpacredit=="NaN" ? @cum=0 : @cum=@fgpacredit %>
                    <div class="study-last">GPA = <%= @cum %> </div>
                    <div class="credite cr-left"><%=@ftcredit%></div>
                </div>
            </div>
            <%end%>
            </div>
            <div class="qpd-outer2">
                <%if @jun.count > 0%>
            <div class="tab-one">
                <div class="course">
                    <div class="cour">Course Study - Junior </div>
                    <div class="honors">Weighted </div>
                    <div class="grade bd-gray">Grade </div>
                    <div class="credite cr-left">Credits</div>
                </div>
                <% @gpa = 0
                @jtcredit = 0 %>
                <% @jun.each do |k,val| %>
                    <div class="lite_section">
                        <div class="cour"><%= val["subject"] %>: <%= val["course"] %></div>
                        <div class="honors bd-gray"><%= val["honor"]%></div>
                        <div class="grade cr-left"><%= val["grade"]%></div>
                        <div class="credite cr-left"><%= val["credit"]%></div>
                        <%
                        if val["honor"]=='AP'
                          ap=1 
                        elsif val["honor"]=='Honors'
                          ap=0.5
                        else
                          ap=0
                        end
                        @gpa = @gpa + @val[val["grade"]] +ap
                          if !['F', 'NC', 'CR', 'W', 'I'].include?  val["grade"]
                            @jtcredit = @jtcredit + val["credit"].to_f
                          else
                            @jtcredit = val["credit"].to_f
                          end
                          @jgpacredit = @gpa/@jtcredit

                       %>
                    </div>

                <%end%>

                <div class="lite_section">
                <%@jgpacredit=="NaN" ? @cum=0 : @cum=@jgpacredit %>
                    <div class="study-last">GPA = <%= @cum %> </div>
                    <div class="credite cr-left"><%=@jtcredit%></div>
                </div>


            </div>
            <%end%>
            </div>
        </div>   
        <div class="clearfq"></div>     
        <div class="qpd-outer">
            <div class="qpd-outer2">
                <%if @soph.count > 0%>
            <div class="tab-one">
                <div class="course">
                    <div class="cour">&nbsp;Course Study - Sophomore </div>
                    <div class="honors">Weighted </div>
                    <div class="grade bd-gray">Grade </div>
                    <div class="credite cr-left">Credits</div>
                </div>
                <% @gpa = 0
                @stcredit = 0 %>
                <% @soph.each do |k,val| %>
                    <div class="lite_section">
                        <div class="cour">&nbsp;<%= val["subject"] %>: <%= val["course"] %></div>
                        <div class="honors bd-gray"><%= val["honor"]%></div>
                        <div class="grade cr-left"><%= val["grade"]%></div>
                        <div class="credite cr-left"><%= val["credit"]%></div>
                        <%
                        if val["honor"]=='AP'
                          ap=1 
                        elsif val["honor"]=='Honors'
                          ap=0.5
                        else
                          ap=0
                        end
                        @gpa = @gpa + @val[val["grade"]] +ap
                          if !['F', 'NC', 'CR', 'W', 'I'].include?  val["grade"]
                            @stcredit = @stcredit + val["credit"].to_f
                          else
                            @stcredit = val["credit"].to_f
                          end
                          @sgpacredit = @gpa.to_f/@stcredit

                       %>
                    </div>

                <%end%>

                <div class="lite_section">
                <% @sgpacredit=="NaN" ? @cum=0 : @cum=@sgpacredit %>
                    <div class="study-last">GPA = <%= @cum %> </div>
                    <div class="credite cr-left"><%=@stcredit%></div>
                </div>


            </div>
            <%end%>
        </div>
            <div class="qpd-outer2">
                <%if @sen.count > 0%>
            <div class="tab-one">
                <div class="course">
                    <div class="cour">Course Study - Senior </div>
                    <div class="honors">Weighted </div>
                    <div class="grade bd-gray">Grade </div>
                    <div class="credite cr-left">Credits</div>
                </div>
                <% @gpa = 0
                @setcredit = 0 %>
                <% @sen.each do |k,val| %>
                    <div class="lite_section">
                        <div class="cour"><%= val["subject"] %>: <%= val["course"] %></div>
                        <div class="honors bd-gray"><%= val["honor"]%></div>
                        <div class="grade cr-left"><%= val["grade"]%></div>
                        <div class="credite cr-left"><%= val["credit"]%></div>
                        <%
                        if val["honor"]=='AP'
                          ap=1 
                        elsif val["honor"]=='Honors'
                          ap=0.5
                        else
                          ap=0
                        end
                        @gpa = @gpa + @val[val["grade"]] +ap
                          if !['F', 'NC', 'CR', 'W', 'I'].include?  val["grade"]
                            @setcredit = @setcredit + val["credit"].to_f
                          else
                            @setcredit = val["credit"].to_f
                          end
                          @segpacredit = @gpa/@setcredit

                       %>
                    </div>

                <%end%>

                <div class="lite_section">
                <% @segpacredit=="NaN" ? @cum=0 : @cum=@segpacredit %>
                    <div class="study-last">GPA = <%= @cum %> </div>
                    <div class="credite cr-left"><%=@setcredit%></div>
                </div>


            </div>
            <%end%>
        </div>
        </div>
        <div class="clearfq"></div>
    <div class="qpd-outer">
            <div class="qpd-outer2">
                <div class="tab-one pd-mar-botm">

                <div class="course">
                    <div class="cumulative">&nbsp;Summary By Grade</div>
                </div>

                <div class="summary">
                    <div class="cum-gpa bd-gray ">Grade </div>

                    <% arra=["Freshman","Sophomore","Junior","Senior"]
                    arra.each do |val| %>
                    <div class="nineth bd-gray ">
                        <%=val%>
                    </div>
                    <%end%>
                </div>

                <div class="summary">
                    <div class="cum-gpa bd-gray ">Cum. GPA</div>

                    <% arr=[@fgpacredit,@sgpacredit,@jgpacredit,@segpacredit]
                    arr.each do|val|%>
                    <div class="nineth bd-gray ">
                        <%=val%>
                    </div>
                    <%end%>
                </div>

                <div class="summary">
                    <div class="cum-gpa bd-gray ">Credits Earned</div>
                    <% arr1=[@ftcredit,@stcredit,@jtcredit,@setcredit]
                    arr1.each do|val|%>
                    <div class="nineth bd-gray ">
                        <%=val%>
                    </div>
                    <%end%>
                </div>
            </div>
                <div class="tab-one">

                <div class="course">
                    <div class="cumulative">&nbsp;Grading Scale</div>
                </div>

                <div class="summary">
                    <div class="gra-one bd-gray ">90 - 100 </div>
                    <div class="gra-two bd-gray ">80 - 89  </div>
                    <div class="gra-three bd-gray ">70 - 79</div>
                    <div class="gra-four bd-gray ">60 - 69 </div>
                    <div class="gra-five bd-gray ">0 - 59</div>

                </div>
                <div class="summary">
                    <div class="gra-one bd-gray ">A</div>
                    <div class="gra-two bd-gray ">B</div>
                    <div class="gra-three bd-gray ">C</div>
                    <div class="gra-four bd-gray ">D</div>
                    <div class="gra-five bd-gray ">F</div>

                </div>

                <div class="authoeize">
                    <div class=""><input type="textarea" value="" style="margin-left:10px;" /></div>
                    <div class="atho">
                        <div class="atho-one bd-gray">Authorized Signature </div>
                        <div class="atho-sec bd-gray">Date:&nbsp;<%= Time.now.strftime("%m/%d/%Y")%></div>
                    </div>
                </div>

                
            </div>
            
        </div>
            <div class="qpd-outer2">

                <div class="tab-two">


                <div class="course">
                    <div class="cumulative">Cumulative Summary (Freshman - Senior)</div>
                </div>

                <div class="total_cr">
                    <div class="tot-cr bd-gray ">Total Credits</div>
                    <div class="gpa-cr bd-gray ">GPA Credits </div>
                    <div class="gpa-point bd-gray ">GPA Points </div>
                    <div class="gpa bd-gray ">GPA</div>   
                </div>
                <div class="total_cr">
                    <div class="tot-cr bd-gray ">
                        <%=@student.total_credit[0]%>
                    </div>
                    <div class="gpa-cr bd-gray ">
                        <%=@student.gpa_credit[0]%>

                    </div>
                    <div class="gpa-point bd-gray ">
                        <%=@student.gpa_points[0]%>

                    </div>
                    <div class="gpa bd-gray ">
                         <% @student.cumulative_gpa[0]=="NaN" ? @cum=0 : @cum=@student.cumulative_gpa[0] %>
                        <%=@cum%>

                    </div>   
                </div>
            </div>
        </div>
    </div>

        <div class="tab-section">
            


            
        </div>
    </div>
</div>
<div class="container">
    <div class="row">
        <div class="col-md-12 col-sm-12 tplgin5">
            
        <%= link_to view_pdf_path(@student, :format => "pdf"),:class=>"btn btn-info btn-xs" do %>
            <i><span class="glyphicon glyphicon-download-alt"></span></i> Download Pdf
        <%end%>
        <%= link_to 'javascript:void(0)',onclick: "printpage('.wraper')",:class=>"btn btn-success btn-xs" do %>
            <i><span class="glyphicon glyphicon-print"></span></i> Print
        <%end%>
        </div>
    </div>
</div>









